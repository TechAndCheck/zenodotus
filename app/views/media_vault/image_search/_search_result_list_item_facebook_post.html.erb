<%
    if result.key?(:image)
      result = result[:image]

      return if result.archivable_item.images.count.zero?
      preview_image_url = result.archivable_item.images.first.image_url
    else
      result = result[:video]

      return if result.archivable_item.videos.count.zero?
      preview_image_url = result.archivable_item.videos.first.video_derivatives[:preview].url
    end
%>

<div class="border rounded mb-5 flex flex-col md:flex-row p-6 md:h-48">
  <div class="flex-none h-96 mb-5 md:mb-0 md:h-auto md:w-32 overflow-hidden rounded">
    <% debugger if result.nil? %>
    <a href="#"><img src="<%= preview_image_url %>" /></a>
  </div>
  <div class="overflow-hidden md:pl-5 mr-5 flex flex-col md:flex-row w-full text-left justify-around">
    <div class="flex flex-col flex-wrap justify-around">
      <div class="h-8">
        <div class="pl-2 pr-2 bg-gradient-to-r from-blue-400 to-blue-600 text-white rounded">Facebook</div>
      </div>
      <div class="h-8">
        Fact Check Rating: Three Pinocchios
      </div>
      <div class="h-8">
        <a href="#">Fact Check Link <i class="fas fa-external-link-square-alt"></i></a>
      </div>
      <div class="h-8">
        Likes: <%= result.facebook_post.number_of_likes %>
      </div>
    </div>
    <div class="flex flex-col flex-wrap justify-around">
      <div class="h-8">
        Retrieved At: <%= result.created_at.to_formatted_s(:long_ordinal) %>
      </div>
      <div class="h-8">
        Media Review Rating: Manipulated
      </div>
      <div class="h-8">
        Rating Organization: The Washington Post
      </div>
      <div class="h-8">
        Fact Check Publish Date: <%= result.facebook_post.posted_at.to_formatted_s(:long_ordinal) %>
      </div>
    </div>
    <div class="flex flex-col justify-between md:w-1/3">
      <div class="h-8">
        Claim: This is a sample claim of some sort of thing, it may be long, so let's see how this goes.
      </div>
      <div class="h-8 text-right text-green-400">
        <a href="#">Details <i class="fas fa-arrow-right"></i></a>
      </div>
    </div>
  </div>
  <div class="flex-none md:w-32 pl-5 border-t md:border-t-0 md:border-l mt-5 md:mt-0">
    <div class="flex flex-col items-center text-center justify-center">
      <a href="#">
        <img src="<%= result.facebook_post.author.profile_image.url %>" class="w-20 h-20 rounded-full inline-flex items-center justify-center bg-gray-200 text-gray-400"/>
      </a>
      <a href="#" class="font-medium title-font mt-1 text-gray-900 text-lg">@<%= result.facebook_post.author.name %></a>
      <a href="#"><p class="text-base"><%= result.facebook_post.author.name %></p></a>
    </div>
  </div>
</div>
