<div class="flex" data-controller="account">
  <div id="nav" class="h-full overflow-visible w-fit pt-60px shrink-0" >
    <a class="block" href="javascript:;" data-action="account#toggleView" data-account-id-param="accountSettings">Settings</a>
    <a class="block" href="javascript:;" data-action="account#toggleView" data-account-id-param="textSearchHistory">Text searches</a>
    <a class="block" href="javascript:;" data-action="account#toggleView" data-account-id-param="imageSearchHistory">Image searches</a>
  </div>
  <div id="settings" class="flex-grow relative left-5">
    <div id="accountSettings" class="settingsBlock relative w-9/12">
      <h1 class="text-2xl font-light py-3">Update account details</h1>
			<%= render "change_password" %>
			<%= render "change_email" %>
			<%= render "delete_account" %>
    <div id="textSearchHistory" class="settingsBlock " hidden=true>
      <h1 class="text-2xl font-light py-2">Text Search History</h1>
      <div>
        <div class="flex flex-wrap">
          <% split_searches_by_date(@text_searches).each do |date, searches| %>
            <div class="lg w-1/3 leading-relaxed text-gray-500 bg-green-50 border-gray-200 border-2 rounded-lg mr-5 mb-5">
              <p class="font-bold p-3 bg-white"><%= date %></p>
              <% searches.each_with_index do |search, index| %>
                <div class="<%= index % 2 != 0 ? "bg-green-50" : "bg-gray-100" %>">
                  <span class="pl-3"><%= search.created_at.strftime("%H:%M:%S") %></span>
                  <span class="pl-3"><%= search.query %></span>
                </div>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
      <%== pagy_nav(@pagy_text_searches) if @pagy_text_searches.pages > 1 %>
    </div>

    <div id="imageSearchHistory" class="settingsBlock" hidden=true>
      <h1 class="text-2xl font-light py-2">Image Search History</h1>
      <div>
          <div class="flex flex-wrap">
        <% split_searches_by_date(@image_searches).each do |date, searches| %>
            <div class="lg w-1/3 leading-relaxed text-gray-500 bg-green-50 border-gray-200 border-2 rounded-lg mr-5 mb-5">
              <p class="font-bold p-3 bg-white"><%= date %></p>
              <% searches.each_with_index do |search, index| %>
                <div class="flex px-5 py-3 <%= index % 2 != 0 ? "bg-green-50" : "bg-gray-100" %>">
                  <div class="w-5/12">
                    <p class="relative inset-y-1/2 align-middle"><%= search.created_at.strftime("%H:%M:%S") %></p>
                  </div>
                  <div class="w-5/12">
                    <img src="<%= search.image_url %>">
                  </div>
                </div>
              <% end %>
            </div>
        <% end %>
          </div>
        </div>
      <%== pagy_nav(@pagy_image_searches) if @pagy_image_searches.pages > 1 %>
    </div>
  </div>
</div>
